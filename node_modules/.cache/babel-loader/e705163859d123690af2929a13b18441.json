{"ast":null,"code":"import _regeneratorRuntime from \"/Users/itmac022/Documents/Sarang/PeerbitsDemo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/itmac022/Documents/Sarang/PeerbitsDemo/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from \"axios\";\nimport { useSelector } from 'react-redux';\nexport var LOGIN_URL = \"\".concat(process.env.REACT_APP_API_URL, \"/auth/login\");\nexport var REGISTER_URL = \"api/auth/register\";\nexport var REQUEST_PASSWORD_URL = \"api/auth/forgot-password\";\nexport var ME_URL = \"\".concat(process.env.REACT_APP_API_URL, \"/auth/me\");\nvar instance = axios.create();\nvar selectedData = useSelector(function (state) {\n  return state;\n});\nexport function login(email, password) {\n  console.log(\":login\", email, password);\n  return axios.post('http://localhost:9000/api/users/login' || LOGIN_URL, {\n    email: email,\n    password: password\n  }); // .then((res) => {\n  //   console.log(\"...res.data Login\", res.data);\n  //   return [200, { ...res.data, password: undefined }];\n  // }, (error) => {\n  //   return [400];\n  // });\n}\nexport function register(_x, _x2, _x3, _x4) {\n  return _register.apply(this, arguments);\n}\n\nfunction _register() {\n  _register = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(email, fullname, username, password) {\n    var userData;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            console.log(\"REGISTER_URL\", REGISTER_URL);\n            console.log(\":register\", email, fullname, username, password);\n            _context.next = 4;\n            return instance.post('http://localhost:9000/api/users' || REGISTER_URL, {\n              email: email,\n              fullname: fullname,\n              username: username,\n              password: password\n            });\n\n          case 4:\n            userData = _context.sent;\n            console.log(\"UserData\", userData);\n            return _context.abrupt(\"return\", userData);\n\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _register.apply(this, arguments);\n}\n\nexport function requestPassword(email) {\n  console.log(\":requestPassword\", email);\n  return axios.post(REQUEST_PASSWORD_URL, {\n    email: email\n  });\n}\nexport function getUserByToken() {\n  return _getUserByToken.apply(this, arguments);\n}\n\nfunction _getUserByToken() {\n  _getUserByToken = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n    var apiReturn;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            console.log(\"getUserByToken\", selectedData); // Authorization head should be fulfilled in interceptor.\n            // const headers = { Authorization: `Bearer ${token}` };\n\n            _context2.next = 3;\n            return axios.get('http://localhost:9000/api/users/auth');\n\n          case 3:\n            apiReturn = _context2.sent;\n            console.log(\"getUserByToken\", apiReturn);\n            return _context2.abrupt(\"return\", apiReturn);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _getUserByToken.apply(this, arguments);\n}","map":{"version":3,"sources":["/Users/itmac022/Documents/Sarang/PeerbitsDemo/src/app/modules/Auth/_redux/authCrud.js"],"names":["axios","useSelector","LOGIN_URL","process","env","REACT_APP_API_URL","REGISTER_URL","REQUEST_PASSWORD_URL","ME_URL","instance","create","selectedData","state","login","email","password","console","log","post","register","fullname","username","userData","requestPassword","getUserByToken","get","apiReturn"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,OAAO,IAAMC,SAAS,aAAMC,OAAO,CAACC,GAAR,CAAYC,iBAAlB,gBAAf;AACP,OAAO,IAAMC,YAAY,GAAG,mBAArB;AACP,OAAO,IAAMC,oBAAoB,GAAG,0BAA7B;AACP,OAAO,IAAMC,MAAM,aAAML,OAAO,CAACC,GAAR,CAAYC,iBAAlB,aAAZ;AAEP,IAAMI,QAAQ,GAAGT,KAAK,CAACU,MAAN,EAAjB;AACA,IAAMC,YAAY,GAAGV,WAAW,CAAC,UAACW,KAAD;AAAA,SAAWA,KAAX;AAAA,CAAD,CAAhC;AACA,OAAO,SAASC,KAAT,CAAeC,KAAf,EAAsBC,QAAtB,EAAgC;AACrCC,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ,EAAsBH,KAAtB,EAA6BC,QAA7B;AACA,SAAOf,KAAK,CAACkB,IAAN,CAAW,2CAA2ChB,SAAtD,EAAiE;AAAEY,IAAAA,KAAK,EAALA,KAAF;AAASC,IAAAA,QAAQ,EAARA;AAAT,GAAjE,CAAP,CAFqC,CAGrC;AACA;AACA;AACA;AACA;AACA;AACD;AAED,gBAAsBI,QAAtB;AAAA;AAAA;;;uEAAO,iBAAwBL,KAAxB,EAA+BM,QAA/B,EAAyCC,QAAzC,EAAmDN,QAAnD;AAAA;AAAA;AAAA;AAAA;AAAA;AACLC,YAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BX,YAA5B;AACAU,YAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBH,KAAzB,EAAgCM,QAAhC,EAA0CC,QAA1C,EAAoDN,QAApD;AAFK;AAAA,mBAGmBN,QAAQ,CAACS,IAAT,CAAc,qCAAqCZ,YAAnD,EAAiE;AAAEQ,cAAAA,KAAK,EAALA,KAAF;AAASM,cAAAA,QAAQ,EAARA,QAAT;AAAmBC,cAAAA,QAAQ,EAARA,QAAnB;AAA6BN,cAAAA,QAAQ,EAARA;AAA7B,aAAjE,CAHnB;;AAAA;AAGCO,YAAAA,QAHD;AAILN,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBK,QAAxB;AAJK,6CAKEA,QALF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAcP,OAAO,SAASC,eAAT,CAAyBT,KAAzB,EAAgC;AACrCE,EAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ,EAAgCH,KAAhC;AACA,SAAOd,KAAK,CAACkB,IAAN,CAAWX,oBAAX,EAAiC;AAAEO,IAAAA,KAAK,EAALA;AAAF,GAAjC,CAAP;AACD;AAED,gBAAsBU,cAAtB;AAAA;AAAA;;;6EAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AACLR,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA6BN,YAA7B,EADK,CAEL;AACA;;AAHK;AAAA,mBAImBX,KAAK,CAACyB,GAAN,CAAU,sCAAV,CAJnB;;AAAA;AAICC,YAAAA,SAJD;AAKLV,YAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BS,SAA9B;AALK,8CAMEA,SANF;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G","sourcesContent":["import axios from \"axios\";\r\nimport { useSelector } from 'react-redux'\r\n\r\nexport const LOGIN_URL = `${process.env.REACT_APP_API_URL}/auth/login`;\r\nexport const REGISTER_URL = \"api/auth/register\";\r\nexport const REQUEST_PASSWORD_URL = \"api/auth/forgot-password\";\r\nexport const ME_URL = `${process.env.REACT_APP_API_URL}/auth/me`;\r\n\r\nconst instance = axios.create();\r\nconst selectedData = useSelector((state) => state);\r\nexport function login(email, password) {\r\n  console.log(\":login\", email, password);\r\n  return axios.post('http://localhost:9000/api/users/login' || LOGIN_URL, { email, password });\r\n  // .then((res) => {\r\n  //   console.log(\"...res.data Login\", res.data);\r\n  //   return [200, { ...res.data, password: undefined }];\r\n  // }, (error) => {\r\n  //   return [400];\r\n  // });\r\n}\r\n\r\nexport async function register(email, fullname, username, password) {\r\n  console.log(\"REGISTER_URL\", REGISTER_URL);\r\n  console.log(\":register\", email, fullname, username, password);\r\n  const userData = await  instance.post('http://localhost:9000/api/users' || REGISTER_URL, { email, fullname, username, password });\r\n  console.log(\"UserData\", userData);\r\n  return userData;\r\n  // .then((res) => {\r\n  //   console.log(\"...res.data\", res.data);\r\n  //   return [200, { ...res.data, password: undefined }];\r\n  // }, (error) => {\r\n  //   return [400, undefined];\r\n  // });\r\n}\r\n\r\nexport function requestPassword(email) {\r\n  console.log(\":requestPassword\", email);\r\n  return axios.post(REQUEST_PASSWORD_URL, { email });\r\n}\r\n\r\nexport async function getUserByToken() {\r\n  console.log(\"getUserByToken\",selectedData);\r\n  // Authorization head should be fulfilled in interceptor.\r\n  // const headers = { Authorization: `Bearer ${token}` };\r\n  const apiReturn = await axios.get('http://localhost:9000/api/users/auth')\r\n  console.log(\"getUserByToken\", apiReturn);\r\n  return apiReturn;\r\n  // .then((res) => {\r\n  //   console.log(\"res.dataAuthhhh\", res.data);\r\n  //   return [200, { ...res.data, password: undefined }];\r\n  // }, (error) => {\r\n  //   return [400];\r\n  // });\r\n}\r\n"]},"metadata":{},"sourceType":"module"}